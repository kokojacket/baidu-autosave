import{u as y,A as V,_ as x}from"./index-BNn2tC2b.js";/* empty css                 */import{y as E,r as c,l as R,z as B,A as k,B as o,R as a,J as r,W as z,P as m,u as F,az as S,aB as A,a4 as I,O as L}from"./vendor-OArhA24O.js";import{w as N,x as q,y as C,g as P,j as p}from"./element-Ci-NFJgn.js";const U={class:"login-container"},K={class:"login-card"},M={class:"login-footer"},O={class:"version-info"},j=E({__name:"LoginView",setup(D){const g=S(),_=A(),f=y(),l=c(),t=c(!1),s=R({username:"",password:""}),v={username:[{required:!0,message:"请输入用户名",trigger:"blur"}],password:[{required:!0,message:"请输入密码",trigger:"blur"},{min:6,message:"密码长度不能少于6位",trigger:"blur"}]},n=async()=>{if(!(!l.value||!await l.value.validate().catch(()=>!1))){t.value=!0;try{await f.login(s.username,s.password),p.success("登录成功");const e=_.query.redirect;await g.push(e||"/")}catch(e){p.error(`登录失败: ${e}`)}finally{t.value=!1}}};return(w,e)=>{const d=C,i=q,b=P,h=N;return k(),B("div",U,[o("div",K,[e[2]||(e[2]=o("div",{class:"login-header"},[o("h1",{class:"login-title"},"百度网盘自动转存工具"),o("p",{class:"login-subtitle"},"请登录您的账户")],-1)),a(h,{ref_key:"loginFormRef",ref:l,model:s,rules:v,class:"login-form",onSubmit:z(n,["prevent"])},{default:r(()=>[a(i,{prop:"username"},{default:r(()=>[a(d,{modelValue:s.username,"onUpdate:modelValue":e[0]||(e[0]=u=>s.username=u),placeholder:"用户名",size:"large","prefix-icon":"User",disabled:t.value},null,8,["modelValue","disabled"])]),_:1}),a(i,{prop:"password"},{default:r(()=>[a(d,{modelValue:s.password,"onUpdate:modelValue":e[1]||(e[1]=u=>s.password=u),type:"password",placeholder:"密码",size:"large","prefix-icon":"Lock","show-password":"",disabled:t.value,onKeyup:I(n,["enter"])},null,8,["modelValue","disabled"])]),_:1}),a(i,{class:"login-button-item"},{default:r(()=>[a(b,{type:"primary",size:"large",class:"login-button",loading:t.value,onClick:n},{default:r(()=>[L(m(t.value?"登录中...":"登录"),1)]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"]),o("div",M,[o("div",O,[o("span",null,"版本 "+m(F(V)),1)])])])])}}}),G=x(j,[["__scopeId","data-v-67a993fb"]]);export{G as default};
