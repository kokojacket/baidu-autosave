import{e as M,j as Q,c as Ve,u as he,A as xe,B as Ce,R as ke,_ as Ee}from"./index-BNn2tC2b.js";/* empty css                *//* empty css                 *//* empty css                  */import{X as Pe,Y as Ue,z as Se,w as Oe,x as Fe,C as Te,Z as Ne,_ as He,y as Be,I as Ae,N as $e,g as Re,b as ze,Q as De,q as Ke,u as Le,n as We,j as _}from"./element-Ci-NFJgn.js";import{ax as je,r as R,c as Y,y as qe,aA as se,l as O,j as Ie,z as $,A as B,B as t,R as l,J as o,L as X,Q as Z,O as v,I as ue,u as b,a6 as fe,P as W}from"./vendor-OArhA24O.js";const Me=je("config",()=>{const f=R({}),y=R(!1),h=R(null),z=R(!1),r=Y(()=>{var a;return((a=f.value.notify)==null?void 0:a.enabled)||!1}),ae=Y(()=>{var a;return((a=f.value.cron)==null?void 0:a.default_schedule)&&f.value.cron.default_schedule.length>0}),D=Y(()=>{var a;return((a=f.value.share)==null?void 0:a.default_password)!==void 0}),ne=Y(()=>{var a;return((a=f.value.quota_alert)==null?void 0:a.enabled)||!1}),G=Y(()=>{var d;const a=((d=f.value.notify)==null?void 0:d.direct_fields)||{},n=["PUSH_PLUS_TOKEN","PUSH_PLUS_USER","WEBHOOK_URL","WEBHOOK_METHOD","WEBHOOK_CONTENT_TYPE","WEBHOOK_HEADERS","WEBHOOK_BODY"];return Object.entries(a).filter(([c])=>!n.includes(c)).map(([c,H])=>({name:c,value:String(H||"")}))}),ee=async()=>{var a;y.value=!0,h.value=null;try{const n=await M.getConfig();if(n.success){const d=n.config||((a=n.data)==null?void 0:a.config)||n.data;f.value={notify:d.notify||{},cron:d.cron||{},share:d.share||{},retry:d.retry||{},scheduler:d.scheduler||{},file_operations:d.file_operations||{},quota_alert:d.quota_alert||{},auth:d.auth||{},baidu:d.baidu||{}}}else throw new Error(n.message||"获取配置失败")}catch(n){h.value=Q(n),console.error("获取配置失败:",n)}finally{y.value=!1}},E=async a=>{z.value=!0,h.value=null;try{const n=await M.updateConfig(a);if(n.success)return f.value={...f.value,...a},!0;throw new Error(n.message||"更新配置失败")}catch(n){throw h.value=Q(n),n}finally{z.value=!1}};return{config:f,loading:y,error:h,saving:z,isNotificationEnabled:r,isCronEnabled:ae,isShareEnabled:D,isQuotaAlertEnabled:ne,notificationFields:G,fetchConfig:ee,updateConfig:E,updateNotificationConfig:async a=>{const n={notify:{...f.value.notify,...a}};return E(n)},updateCronConfig:async a=>{const n={cron:{...f.value.cron,...a}};return E(n)},updateShareConfig:async a=>{const n={share:{...f.value.share,...a}};return E(n)},updateRetryConfig:async a=>{const n={retry:{...f.value.retry,...a}};return E(n)},updateSchedulerConfig:async a=>{const n={scheduler:{...f.value.scheduler,...a}};return E(n)},updateFileOpsConfig:async a=>{const n={file_operations:{...f.value.file_operations,...a}};return E(n)},updateQuotaAlertConfig:async a=>{const n={quota_alert:{...f.value.quota_alert,...a}};return E(n)},updateAuthConfig:async a=>{const n={auth:{...f.value.auth,...a}};return E(n)},testNotification:async()=>{try{const a=await M.testNotify();if(a.success)return!0;throw new Error(a.message||"测试通知失败")}catch(a){throw h.value=Q(a),a}},addCustomNotificationField:async(a,n)=>{var d;try{const c=await M.addNotifyField(a,n);if(c.success){const H={...(d=f.value.notify)==null?void 0:d.direct_fields,[a]:n};return f.value.notify?f.value.notify.direct_fields=H:f.value.notify={direct_fields:H},!0}else throw new Error(c.message||"添加通知字段失败")}catch(c){throw h.value=Q(c),c}},deleteCustomNotificationField:async a=>{var n;try{const d=await M.deleteNotifyField(a);if(d.success){const c={...(n=f.value.notify)==null?void 0:n.direct_fields};return delete c[a],f.value.notify?f.value.notify.direct_fields=c:f.value.notify={direct_fields:c},!0}else throw new Error(d.message||"删除通知字段失败")}catch(d){throw h.value=Q(d),d}},resetToDefaults:()=>{f.value={notify:{enabled:!1,notification_delay:30,direct_fields:{}},cron:{default_schedule:[]},share:{default_password:"8888",default_period_days:7},retry:{max_attempts:3,delay_seconds:5},scheduler:{max_workers:1,misfire_grace_time:3600,coalesce:!0,max_instances:1},file_operations:{rename_delay_seconds:.5,batch_size:50,concurrent_limit:1},quota_alert:{enabled:!1,threshold_percent:98,check_schedule:"0 0 * * *"},auth:{users:"",password:"",session_timeout:3600}}},validateConfig:a=>{var c,H;const n=a||f.value,d=[];return(c=n.notify)!=null&&c.enabled&&!((H=n.notify.direct_fields)!=null&&H.WEBHOOK_URL)&&d.push("启用通知时必须设置webhook URL"),n.retry&&(n.retry.max_attempts&&n.retry.max_attempts<0&&d.push("最大重试次数不能小于0"),n.retry.delay_seconds&&n.retry.delay_seconds<1&&d.push("重试延迟必须大于0")),n.scheduler&&(n.scheduler.max_workers&&n.scheduler.max_workers<1&&d.push("最大工作线程数必须大于0"),n.scheduler.max_instances&&n.scheduler.max_instances<1&&d.push("最大实例数必须大于0")),n.file_operations&&(n.file_operations.batch_size&&n.file_operations.batch_size<1&&d.push("批处理大小必须大于0"),n.file_operations.concurrent_limit&&n.file_operations.concurrent_limit<1&&d.push("并发限制必须大于0")),{valid:d.length===0,errors:d}},clearError:()=>{h.value=null}}}),Qe={class:"settings-view"},Ye={class:"settings-content"},Je={class:"setting-section"},Xe={class:"setting-section"},Ze={class:"custom-fields"},Ge={class:"field-name"},el={class:"field-value"},ll={class:"add-field"},tl={class:"setting-section"},ol={class:"cron-schedule-container"},sl={class:"cron-schedule-list"},al={class:"setting-section"},nl={class:"setting-section"},il={class:"setting-section"},dl={class:"setting-section"},rl={class:"setting-section"},ul={class:"setting-section"},fl={class:"setting-section"},ml={class:"setting-section"},pl={style:{"text-align":"right","margin-top":"20px"}},_l={class:"setting-section"},cl={class:"version-info"},yl={class:"info-item"},vl={class:"info-value"},wl={class:"info-item"},gl={class:"info-value"},bl={class:"info-item"},Vl={class:"info-value"},hl={class:"info-item"},xl={class:"info-value"},Cl=qe({__name:"SettingsView",setup(f){const y=Me(),h=Ve(),z=he(),{config:r,loading:ae,saving:D,notificationFields:ne}=se(y),{latestVersion:G,hasUpdate:ee,checking:E}=se(h),{username:ie}=se(z),de=()=>{h.checkForUpdates()},le=R("notification"),u=O({enabled:!1,notification_delay:30,push_plus_token:"",push_plus_user:"",webhook_url:"",webhook_method:"POST",webhook_content_type:"application/json",webhook_headers:"Content-Type: application/json",webhook_body:`title: "$title"
content: "$content"
source: "我的项目"`}),F=O({default_schedule:["57 20,23 * * *","53 12 * * *"]}),T=O({default_password:"8888",default_period_days:7}),p=O({currentPassword:"",newPassword:"",confirmPassword:""}),J=R(!1),N=O({max_attempts:3,delay_seconds:5}),g=O({max_workers:1,misfire_grace_time:3600,coalesce:!0,max_instances:1}),x=O({rename_delay_seconds:.5,batch_size:50,concurrent_limit:1}),V=O({enabled:!0,threshold_percent:98,check_schedule:"0 0 * * *"}),C=O({users:"koko",password:"kokojy1996",session_timeout:3600}),j=R([]),a=O({name:"",value:""}),n=async()=>{try{await y.updateNotificationConfig(u),_.success("通知设置已保存")}catch(m){_.error(`保存失败：${m}`)}},d=async()=>{try{await y.updateCronConfig(F),_.success("定时设置已保存")}catch(m){_.error(`保存失败：${m}`)}},c=async()=>{try{await y.updateShareConfig(T),_.success("分享设置已保存")}catch(m){_.error(`保存失败：${m}`)}},H=async()=>{try{await Promise.all([y.updateRetryConfig(N),y.updateSchedulerConfig(g),y.updateFileOpsConfig(x),y.updateQuotaAlertConfig(V),y.updateAuthConfig(C)]),_.success("系统设置已保存")}catch(m){_.error(`保存失败：${m}`)}},me=async()=>{if(!p.currentPassword){_.warning("请输入当前密码");return}if(!p.newPassword){_.warning("请输入新密码");return}if(p.newPassword!==p.confirmPassword){_.warning("两次输入的密码不一致");return}if(p.newPassword.length<6){_.warning("新密码至少需要6位");return}J.value=!0;try{await z.updatePassword(p.currentPassword,p.newPassword),_.success("密码修改成功"),p.currentPassword="",p.newPassword="",p.confirmPassword=""}catch(m){_.error(`密码修改失败：${m}`)}finally{J.value=!1}},pe=async()=>{try{await y.testNotification(),_.success("测试通知已发送")}catch(m){_.error(`测试失败：${m}`)}},_e=()=>{F.default_schedule.push("")},ce=m=>{F.default_schedule.splice(m,1)},ye=async()=>{if(!a.name||!a.value){_.warning("请填写字段名和值");return}try{await y.addCustomNotificationField(a.name,a.value),j.value.push({name:a.name,value:a.value}),_.success("自定义字段已添加"),a.name="",a.value=""}catch(m){_.error(`添加失败：${m}`)}},ve=async m=>{try{await y.deleteCustomNotificationField(m);const e=j.value.findIndex(q=>q.name===m);e>-1&&j.value.splice(e,1),_.success("自定义字段已删除")}catch(e){_.error(`删除失败：${e}`)}},we=()=>{if(r.value){if(r.value.notify){u.enabled=r.value.notify.enabled||!1,u.notification_delay=r.value.notify.notification_delay||30;const m=r.value.notify.direct_fields||{};u.push_plus_token=m.PUSH_PLUS_TOKEN||"",u.push_plus_user=m.PUSH_PLUS_USER||"",u.webhook_url=m.WEBHOOK_URL||"",u.webhook_method=m.WEBHOOK_METHOD||"POST",u.webhook_content_type=m.WEBHOOK_CONTENT_TYPE||"application/json",u.webhook_headers=m.WEBHOOK_HEADERS||"Content-Type: application/json",u.webhook_body=m.WEBHOOK_BODY||`title: "$title"
content: "$content"
source: "我的项目"`}r.value.cron&&(F.default_schedule=[...r.value.cron.default_schedule||["57 20,23 * * *","53 12 * * *"]]),r.value.share&&(T.default_password=r.value.share.default_password||"8888",T.default_period_days=r.value.share.default_period_days||7),r.value.retry&&(N.max_attempts=r.value.retry.max_attempts||3,N.delay_seconds=r.value.retry.delay_seconds||5),r.value.scheduler&&(g.max_workers=r.value.scheduler.max_workers||1,g.misfire_grace_time=r.value.scheduler.misfire_grace_time||3600,g.coalesce=r.value.scheduler.coalesce!==!1,g.max_instances=r.value.scheduler.max_instances||1),r.value.file_operations&&(x.rename_delay_seconds=r.value.file_operations.rename_delay_seconds||.5,x.batch_size=r.value.file_operations.batch_size||50,x.concurrent_limit=r.value.file_operations.concurrent_limit||1),r.value.quota_alert&&(V.enabled=r.value.quota_alert.enabled||!1,V.threshold_percent=r.value.quota_alert.threshold_percent||98,V.check_schedule=r.value.quota_alert.check_schedule||"0 0 * * *"),r.value.auth&&(C.users=r.value.auth.users||"",C.password=r.value.auth.password||"",C.session_timeout=r.value.auth.session_timeout||3600)}};return Ie(async()=>{await y.fetchConfig(),we()}),(m,e)=>{const q=Te,i=Fe,P=Ne,A=He,w=Be,U=$e,te=Ae,k=Re,S=Oe,K=Se,L=Ue,oe=ze,ge=We,be=Pe;return B(),$("div",Qe,[e[93]||(e[93]=t("div",{class:"page-header"},[t("h1",{class:"page-title"},"系统设置")],-1)),t("div",Ye,[l(be,{modelValue:le.value,"onUpdate:modelValue":e[32]||(e[32]=s=>le.value=s),class:"settings-tabs"},{default:o(()=>[l(L,{label:"通知设置",name:"notification"},{default:o(()=>[l(K,null,{default:o(()=>[t("div",Je,[e[39]||(e[39]=t("h3",null,"通知配置",-1)),l(S,{model:u,"label-width":"150px"},{default:o(()=>[l(i,{label:"启用通知"},{default:o(()=>[l(q,{modelValue:u.enabled,"onUpdate:modelValue":e[0]||(e[0]=s=>u.enabled=s)},null,8,["modelValue"])]),_:1}),u.enabled?(B(),$(Z,{key:0},[l(i,{label:"通知延迟(秒)"},{default:o(()=>[l(P,{modelValue:u.notification_delay,"onUpdate:modelValue":e[1]||(e[1]=s=>u.notification_delay=s),min:0,max:300},null,8,["modelValue"])]),_:1}),l(A,{"content-position":"left"},{default:o(()=>[...e[33]||(e[33]=[v("Push Plus配置",-1)])]),_:1}),l(i,{label:"Push Plus Token"},{default:o(()=>[l(w,{modelValue:u.push_plus_token,"onUpdate:modelValue":e[2]||(e[2]=s=>u.push_plus_token=s),placeholder:"请输入Push Plus Token","show-password":""},null,8,["modelValue"])]),_:1}),l(i,{label:"Push Plus User"},{default:o(()=>[l(w,{modelValue:u.push_plus_user,"onUpdate:modelValue":e[3]||(e[3]=s=>u.push_plus_user=s),placeholder:"请输入Push Plus用户标识"},null,8,["modelValue"])]),_:1}),l(A,{"content-position":"left"},{default:o(()=>[...e[34]||(e[34]=[v("Webhook配置",-1)])]),_:1}),l(i,{label:"Webhook URL"},{default:o(()=>[l(w,{modelValue:u.webhook_url,"onUpdate:modelValue":e[4]||(e[4]=s=>u.webhook_url=s),placeholder:"https://your-webhook-url.com"},null,8,["modelValue"])]),_:1}),l(i,{label:"HTTP方法"},{default:o(()=>[l(te,{modelValue:u.webhook_method,"onUpdate:modelValue":e[5]||(e[5]=s=>u.webhook_method=s),style:{width:"120px"}},{default:o(()=>[l(U,{label:"POST",value:"POST"}),l(U,{label:"PUT",value:"PUT"}),l(U,{label:"PATCH",value:"PATCH"})]),_:1},8,["modelValue"])]),_:1}),l(i,{label:"内容类型"},{default:o(()=>[l(te,{modelValue:u.webhook_content_type,"onUpdate:modelValue":e[6]||(e[6]=s=>u.webhook_content_type=s)},{default:o(()=>[l(U,{label:"application/json",value:"application/json"}),l(U,{label:"application/x-www-form-urlencoded",value:"application/x-www-form-urlencoded"}),l(U,{label:"text/plain",value:"text/plain"})]),_:1},8,["modelValue"])]),_:1}),l(i,{label:"请求头"},{default:o(()=>[l(w,{modelValue:u.webhook_headers,"onUpdate:modelValue":e[7]||(e[7]=s=>u.webhook_headers=s),type:"textarea",rows:2,placeholder:"Content-Type: application/json"},null,8,["modelValue"]),e[35]||(e[35]=t("div",{class:"form-tip"},"每行一个头部，格式: Header-Name: Header-Value",-1))]),_:1}),l(i,{label:"请求体模板"},{default:o(()=>[l(w,{modelValue:u.webhook_body,"onUpdate:modelValue":e[8]||(e[8]=s=>u.webhook_body=s),type:"textarea",rows:4,placeholder:`title: "$title"
content: "$content"
source: "我的项目"`},null,8,["modelValue"]),e[36]||(e[36]=t("div",{class:"form-tip"},"支持变量：$title, $content",-1))]),_:1})],64)):X("",!0),l(i,null,{default:o(()=>[l(k,{type:"primary",onClick:n,loading:b(D)},{default:o(()=>[...e[37]||(e[37]=[v(" 保存设置 ",-1)])]),_:1},8,["loading"]),u.enabled?(B(),ue(k,{key:0,onClick:pe},{default:o(()=>[...e[38]||(e[38]=[v(" 测试通知 ",-1)])]),_:1})):X("",!0)]),_:1})]),_:1},8,["model"])]),l(A),t("div",Xe,[e[42]||(e[42]=t("h3",null,"其他自定义字段",-1)),t("div",Ze,[(B(!0),$(Z,null,fe(j.value,s=>(B(),$("div",{key:s.name,class:"field-item"},[t("span",Ge,W(s.name)+":",1),t("span",el,W(s.value),1),l(k,{type:"text",size:"small",onClick:I=>ve(s.name)},{default:o(()=>[...e[40]||(e[40]=[v(" 删除 ",-1)])]),_:1},8,["onClick"])]))),128))]),t("div",ll,[l(w,{modelValue:a.name,"onUpdate:modelValue":e[9]||(e[9]=s=>a.name=s),placeholder:"字段名",style:{width:"200px","margin-right":"8px"}},null,8,["modelValue"]),l(w,{modelValue:a.value,"onUpdate:modelValue":e[10]||(e[10]=s=>a.value=s),placeholder:"字段值",style:{width:"300px","margin-right":"8px"}},null,8,["modelValue"]),l(k,{onClick:ye},{default:o(()=>[...e[41]||(e[41]=[v("添加",-1)])]),_:1})])])]),_:1})]),_:1}),l(L,{label:"定时设置",name:"scheduling"},{default:o(()=>[l(K,null,{default:o(()=>[t("div",tl,[e[47]||(e[47]=t("h3",null,"默认定时配置",-1)),e[48]||(e[48]=t("div",{class:"form-tip",style:{"margin-bottom":"16px","font-size":"14px",color:"#909399"}}," 系统默认启用定时任务功能，您可以配置默认的执行计划 ",-1)),l(S,{model:F,"label-width":"150px"},{default:o(()=>[l(i,{label:"默认执行计划"},{default:o(()=>[t("div",ol,[t("div",sl,[(B(!0),$(Z,null,fe(F.default_schedule,(s,I)=>(B(),$("div",{key:I,class:"cron-schedule-item"},[l(w,{modelValue:F.default_schedule[I],"onUpdate:modelValue":re=>F.default_schedule[I]=re,placeholder:"例如：0 9 * * * 表示每天9点执行",class:"cron-input"},null,8,["modelValue","onUpdate:modelValue"]),l(k,{type:"danger",size:"small",onClick:re=>ce(I),class:"remove-btn"},{default:o(()=>[l(oe,null,{default:o(()=>[l(b(De))]),_:1}),e[43]||(e[43]=v(" 删除 ",-1))]),_:1},8,["onClick"])]))),128))]),e[44]||(e[44]=t("div",{class:"form-tip"},[t("p",null,[t("strong",null,"Cron表达式格式："),v("分 时 日 月 星期")]),t("p",null,[t("strong",null,"示例："),v("57 20,23 * * * 表示每天20:57和23:57执行")])],-1))])]),_:1}),l(i,null,{default:o(()=>[l(k,{type:"success",onClick:_e,style:{"margin-right":"8px"}},{default:o(()=>[l(oe,null,{default:o(()=>[l(b(Ke))]),_:1}),e[45]||(e[45]=v(" 添加执行计划 ",-1))]),_:1}),l(k,{type:"primary",onClick:d,loading:b(D)},{default:o(()=>[...e[46]||(e[46]=[v(" 保存设置 ",-1)])]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])])]),_:1})]),_:1}),l(L,{label:"分享设置",name:"sharing"},{default:o(()=>[l(K,null,{default:o(()=>[t("div",al,[e[53]||(e[53]=t("h3",null,"默认分享配置",-1)),e[54]||(e[54]=t("div",{class:"form-tip",style:{"margin-bottom":"16px","font-size":"14px",color:"#909399"}}," 系统默认启用分享功能，您可以配置创建分享链接时的默认参数 ",-1)),l(S,{model:T,"label-width":"150px"},{default:o(()=>[l(i,{label:"默认分享密码"},{default:o(()=>[l(w,{modelValue:T.default_password,"onUpdate:modelValue":e[11]||(e[11]=s=>T.default_password=s),placeholder:"请输入默认分享密码",maxlength:"10","show-word-limit":"",style:{width:"200px"}},null,8,["modelValue"]),e[49]||(e[49]=t("div",{class:"form-tip"}," 创建分享链接时的默认密码，可以是数字或字母组合，长度1-10位 ",-1))]),_:1}),l(i,{label:"默认有效期"},{default:o(()=>[l(te,{modelValue:T.default_period_days,"onUpdate:modelValue":e[12]||(e[12]=s=>T.default_period_days=s),style:{width:"150px"}},{default:o(()=>[l(U,{label:"1天",value:1}),l(U,{label:"3天",value:3}),l(U,{label:"7天",value:7}),l(U,{label:"15天",value:15}),l(U,{label:"30天",value:30})]),_:1},8,["modelValue"]),e[50]||(e[50]=t("span",{style:{"margin-left":"8px",color:"#666"}},"天",-1)),e[51]||(e[51]=t("div",{class:"form-tip"},"分享链接的默认有效期",-1))]),_:1}),l(i,null,{default:o(()=>[l(k,{type:"primary",onClick:c,loading:b(D)},{default:o(()=>[...e[52]||(e[52]=[v(" 保存设置 ",-1)])]),_:1},8,["loading"])]),_:1})]),_:1},8,["model"])])]),_:1})]),_:1}),l(L,{label:"账户设置",name:"account"},{default:o(()=>[l(K,null,{default:o(()=>[t("div",nl,[e[56]||(e[56]=t("h3",null,"账户信息",-1)),l(S,{"label-width":"120px"},{default:o(()=>[l(i,{label:"当前用户名"},{default:o(()=>[l(w,{value:b(ie),readonly:"",disabled:"",style:{width:"300px"}},{prefix:o(()=>[l(oe,null,{default:o(()=>[l(b(Le))]),_:1})]),_:1},8,["value"]),e[55]||(e[55]=t("div",{class:"form-tip"},"用户名无法修改",-1))]),_:1})]),_:1})]),l(A),t("div",il,[e[59]||(e[59]=t("h3",null,"修改密码",-1)),l(S,{model:p,"label-width":"120px"},{default:o(()=>[l(i,{label:"当前密码"},{default:o(()=>[l(w,{modelValue:p.currentPassword,"onUpdate:modelValue":e[13]||(e[13]=s=>p.currentPassword=s),type:"password",placeholder:"请输入当前密码",style:{width:"300px"},"show-password":""},null,8,["modelValue"])]),_:1}),l(i,{label:"新密码"},{default:o(()=>[l(w,{modelValue:p.newPassword,"onUpdate:modelValue":e[14]||(e[14]=s=>p.newPassword=s),type:"password",placeholder:"请输入新密码（至少6位）",style:{width:"300px"},"show-password":""},null,8,["modelValue"])]),_:1}),l(i,{label:"确认新密码"},{default:o(()=>[l(w,{modelValue:p.confirmPassword,"onUpdate:modelValue":e[15]||(e[15]=s=>p.confirmPassword=s),type:"password",placeholder:"请再次输入新密码",style:{width:"300px"},"show-password":""},null,8,["modelValue"])]),_:1}),l(i,null,{default:o(()=>[l(k,{type:"primary",onClick:me,loading:J.value},{default:o(()=>[...e[57]||(e[57]=[v(" 修改密码 ",-1)])]),_:1},8,["loading"]),l(k,{onClick:e[16]||(e[16]=s=>{p.currentPassword="",p.newPassword="",p.confirmPassword=""})},{default:o(()=>[...e[58]||(e[58]=[v(" 重置 ",-1)])]),_:1})]),_:1})]),_:1},8,["model"])])]),_:1})]),_:1}),l(L,{label:"系统设置",name:"general"},{default:o(()=>[l(K,null,{default:o(()=>[t("div",dl,[e[63]||(e[63]=t("h3",null,"重试配置",-1)),l(S,{model:N,"label-width":"150px"},{default:o(()=>[l(i,{label:"最大重试次数"},{default:o(()=>[l(P,{modelValue:N.max_attempts,"onUpdate:modelValue":e[17]||(e[17]=s=>N.max_attempts=s),min:1,max:10,style:{width:"150px"}},null,8,["modelValue"]),e[60]||(e[60]=t("div",{class:"form-tip"},"任务执行失败时的最大重试次数",-1))]),_:1}),l(i,{label:"重试延迟"},{default:o(()=>[l(P,{modelValue:N.delay_seconds,"onUpdate:modelValue":e[18]||(e[18]=s=>N.delay_seconds=s),min:1,max:300,style:{width:"150px"}},null,8,["modelValue"]),e[61]||(e[61]=t("span",{style:{"margin-left":"8px",color:"#666"}},"秒",-1)),e[62]||(e[62]=t("div",{class:"form-tip"},"重试前的等待时间",-1))]),_:1})]),_:1},8,["model"])]),l(A),t("div",rl,[e[69]||(e[69]=t("h3",null,"调度器配置",-1)),l(S,{model:g,"label-width":"150px"},{default:o(()=>[l(i,{label:"最大工作线程"},{default:o(()=>[l(P,{modelValue:g.max_workers,"onUpdate:modelValue":e[19]||(e[19]=s=>g.max_workers=s),min:1,max:10,style:{width:"150px"}},null,8,["modelValue"]),e[64]||(e[64]=t("div",{class:"form-tip"},"同时执行任务的最大数量",-1))]),_:1}),l(i,{label:"错过执行宽限期"},{default:o(()=>[l(P,{modelValue:g.misfire_grace_time,"onUpdate:modelValue":e[20]||(e[20]=s=>g.misfire_grace_time=s),min:60,max:7200,style:{width:"150px"}},null,8,["modelValue"]),e[65]||(e[65]=t("span",{style:{"margin-left":"8px",color:"#666"}},"秒",-1)),e[66]||(e[66]=t("div",{class:"form-tip"},"任务错过执行时间后的宽限期",-1))]),_:1}),l(i,{label:"合并相同任务"},{default:o(()=>[l(q,{modelValue:g.coalesce,"onUpdate:modelValue":e[21]||(e[21]=s=>g.coalesce=s)},null,8,["modelValue"]),e[67]||(e[67]=t("div",{class:"form-tip"},"是否将多个相同的待执行任务合并为一个",-1))]),_:1}),l(i,{label:"最大实例数"},{default:o(()=>[l(P,{modelValue:g.max_instances,"onUpdate:modelValue":e[22]||(e[22]=s=>g.max_instances=s),min:1,max:10,style:{width:"150px"}},null,8,["modelValue"]),e[68]||(e[68]=t("div",{class:"form-tip"},"同一个任务同时运行的最大实例数",-1))]),_:1})]),_:1},8,["model"])]),l(A),t("div",ul,[e[74]||(e[74]=t("h3",null,"文件操作配置",-1)),l(S,{model:x,"label-width":"150px"},{default:o(()=>[l(i,{label:"重命名延迟"},{default:o(()=>[l(P,{modelValue:x.rename_delay_seconds,"onUpdate:modelValue":e[23]||(e[23]=s=>x.rename_delay_seconds=s),min:0,max:10,precision:1,step:.1,style:{width:"150px"}},null,8,["modelValue"]),e[70]||(e[70]=t("span",{style:{"margin-left":"8px",color:"#666"}},"秒",-1)),e[71]||(e[71]=t("div",{class:"form-tip"},"文件重命名操作间的延迟时间",-1))]),_:1}),l(i,{label:"批处理大小"},{default:o(()=>[l(P,{modelValue:x.batch_size,"onUpdate:modelValue":e[24]||(e[24]=s=>x.batch_size=s),min:10,max:200,style:{width:"150px"}},null,8,["modelValue"]),e[72]||(e[72]=t("div",{class:"form-tip"},"单次处理的文件数量",-1))]),_:1}),l(i,{label:"并发限制"},{default:o(()=>[l(P,{modelValue:x.concurrent_limit,"onUpdate:modelValue":e[25]||(e[25]=s=>x.concurrent_limit=s),min:1,max:10,style:{width:"150px"}},null,8,["modelValue"]),e[73]||(e[73]=t("div",{class:"form-tip"},"同时进行的文件操作数量",-1))]),_:1})]),_:1},8,["model"])]),l(A),t("div",fl,[e[79]||(e[79]=t("h3",null,"配额告警配置",-1)),l(S,{model:V,"label-width":"150px"},{default:o(()=>[l(i,{label:"启用配额告警"},{default:o(()=>[l(q,{modelValue:V.enabled,"onUpdate:modelValue":e[26]||(e[26]=s=>V.enabled=s)},null,8,["modelValue"]),e[75]||(e[75]=t("div",{class:"form-tip"},"当存储空间使用率达到阈值时发送告警",-1))]),_:1}),V.enabled?(B(),$(Z,{key:0},[l(i,{label:"告警阈值"},{default:o(()=>[l(P,{modelValue:V.threshold_percent,"onUpdate:modelValue":e[27]||(e[27]=s=>V.threshold_percent=s),min:50,max:99,style:{width:"150px"}},null,8,["modelValue"]),e[76]||(e[76]=t("span",{style:{"margin-left":"8px",color:"#666"}},"%",-1)),e[77]||(e[77]=t("div",{class:"form-tip"},"存储空间使用率达到此百分比时触发告警",-1))]),_:1}),l(i,{label:"检查频率"},{default:o(()=>[l(w,{modelValue:V.check_schedule,"onUpdate:modelValue":e[28]||(e[28]=s=>V.check_schedule=s),placeholder:"0 0 * * *",style:{width:"200px"}},null,8,["modelValue"]),e[78]||(e[78]=t("div",{class:"form-tip"},"Cron表达式，如：0 0 * * * 表示每天午夜检查",-1))]),_:1})],64)):X("",!0)]),_:1},8,["model"])]),l(A),t("div",ml,[e[84]||(e[84]=t("h3",null,"认证配置",-1)),l(S,{model:C,"label-width":"150px"},{default:o(()=>[l(i,{label:"管理员用户名"},{default:o(()=>[l(w,{modelValue:C.users,"onUpdate:modelValue":e[29]||(e[29]=s=>C.users=s),placeholder:"管理员用户名",style:{width:"200px"}},null,8,["modelValue"]),e[80]||(e[80]=t("div",{class:"form-tip"},"系统管理员的登录用户名",-1))]),_:1}),l(i,{label:"管理员密码"},{default:o(()=>[l(w,{modelValue:C.password,"onUpdate:modelValue":e[30]||(e[30]=s=>C.password=s),type:"password",placeholder:"管理员密码",style:{width:"200px"},"show-password":""},null,8,["modelValue"]),e[81]||(e[81]=t("div",{class:"form-tip"},"系统管理员的登录密码",-1))]),_:1}),l(i,{label:"会话超时时间"},{default:o(()=>[l(P,{modelValue:C.session_timeout,"onUpdate:modelValue":e[31]||(e[31]=s=>C.session_timeout=s),min:300,max:86400,style:{width:"150px"}},null,8,["modelValue"]),e[82]||(e[82]=t("span",{style:{"margin-left":"8px",color:"#666"}},"秒",-1)),e[83]||(e[83]=t("div",{class:"form-tip"},"用户登录后的会话有效期，单位：秒",-1))]),_:1})]),_:1},8,["model"])]),t("div",pl,[l(k,{type:"primary",onClick:H,loading:b(D)},{default:o(()=>[...e[85]||(e[85]=[v(" 保存系统设置 ",-1)])]),_:1},8,["loading"])])]),_:1})]),_:1}),l(L,{label:"版本信息",name:"version"},{default:o(()=>[l(K,null,{default:o(()=>[t("div",_l,[e[92]||(e[92]=t("h3",null,"版本信息",-1)),t("div",cl,[t("div",yl,[e[86]||(e[86]=t("span",{class:"info-label"},"当前版本：",-1)),t("span",vl,W(b(xe)),1)]),t("div",wl,[e[87]||(e[87]=t("span",{class:"info-label"},"构建时间：",-1)),t("span",gl,W(b(Ce)),1)]),t("div",bl,[e[89]||(e[89]=t("span",{class:"info-label"},"最新版本：",-1)),t("span",Vl,W(b(G)||"检查中..."),1),b(ee)?(B(),ue(ge,{key:0,type:"warning",size:"small",style:{"margin-left":"8px"}},{default:o(()=>[...e[88]||(e[88]=[v(" 有更新 ",-1)])]),_:1})):X("",!0)]),t("div",hl,[e[90]||(e[90]=t("span",{class:"info-label"},"更新说明：",-1)),t("span",xl,W(b(ke)),1)])]),l(k,{type:"primary",onClick:de,loading:b(E)},{default:o(()=>[...e[91]||(e[91]=[v(" 检查更新 ",-1)])]),_:1},8,["loading"])])]),_:1})]),_:1})]),_:1},8,["modelValue"])])])}}}),Fl=Ee(Cl,[["__scopeId","data-v-c842a669"]]);export{Fl as default};
